# 2022/05/16 수업내용
## 학원 서버 셋팅
### 포트 포워딩
1. 포트 Mapping 
    1) 공인 IP(NAT 장비)의 포트 번호와 사설 IP의 포트 번호로 매핑하는데 서로 다른 포트 번호로 매핑
    2) 1과 같은 상황인데 같은 번호로 매핑 => 이렇게 매핑하는 것이 더욱더 관리하기가 편리하다. 안짝으로 들어가면 갈수록 관리가 힘들기 때문이다.
2. 네트워크 클래스의 구분
    1) 네트워크 클래스와 서브넷 마스크는 별개로 가질 수 있다.

### 시간
1. 시간이 동기화가 되지 않으면 DB 저장 등의 문제가 발생할 수 있다. => 내부에 타임 동기화 서버를 두어 연결된 서버끼리 모두 같은 시간으로 자료 저장 등을 수행한다.
    * 업데이트 서버의 경우에도 마찬가지이다. 업데이트 서버를 따로 두어 모든 서버가 해당 서버에 접속하여 업데이트를 진행

### 터미널 셋팅
1. 원격 데스크톱과 다른 원격 서비스와 다른 점: 원격 데스크톱은 내부 메모리의 세션에 접속하여 각자 분리된 작업 환경을 가질 수 있다. 단, Disk 저장 등의 동작은 동기화된다.
    * 예전에 SUN(오라클)에서 모든 직원 자리에 컴퓨터를 없애고 중앙에 센터를 두고

### 서버
1. 윈도우즈 서버 코어: 리눅스에 성능적으로 대적하기 위한 윈도우즈 서버, GUI가 없고 CUI 환경이다. PowerShell밖에 없다.
2. 윈도우즈 서버 나노: DNS 서버 등을 사용하기 위한 목적의 OS. 리눅스보다 더 성능이 좋음
3. 윈도우즈 에디션: 우리가 지금 사용하고 있는 
4. 윈도우즈 서버 재부팅: 서버계열의 컴퓨터는 거의 종료시키지 않는다. 따라서 재시작을 해야한다. 임시점검 시에도 종료가 아닌 재시작을 하게 된다.
    * ART+F4를 눌러 종료하는 경우 사유를 명시해야 한다. 모두 기록이 된다.
5. 웹사이트 관리자가 되면 정부에 보안 관리자로 등록해야한다. 서버가 공격되는 경우 한국 진흥원에서 해당 서버에 대한 공격 사례를 전파시킨다. 이런 문제를 파악하여 바로바로 대처하면 해킹될 일은 없다.

### 보안
1. 이벤트 뷰어에서 접속 시도 IP를 whois에서 확인하고 강사님께 말씀드려 수동으로 차단시키기
    * 이벤트 뷰어 로그 삭제는 건당건당 삭제되지 않는다. 전체 로그를 삭제하는 방법밖에는 없다.
2. 회사에서는 보통 모든 접속 IP를 차단하고, 허용하고자하는 IP만을 등록하여 접속 허용하는 형태로 간다.
3. 접속 실패자 IP 확인: 
4. 백도어
    1) 백도어: 
    2) 컴퓨터에 프로그램이 깔려서 외부로 외출시키는 형태. 키로거같은 프로그램

### 해킹
1. 나야나 랜섬웨어 사건
    1) '나야나'라는 웹 호스팅 업체에서 랜섬웨어에 감염되었다. 백업서버까지 감염이 되었다. 보통 백업을 3일 간격으로 한다.
        * 이 사건에서도 어떤 경로로 랜섬웨어에 감염이 되었는지 밝혀지지 않았다.
    2) 이 사건 이후로 호스팅 서비스 보안 및 백업 권고 가이드라인이 생겨났다.
        * 서버에 접속 시 OTP 목걸이
2. 호스팅 서비스 보안 및 백업 권고 가이드라인
    1) 패스워드 정책: 패스워드를 종이 문서로 관리하자라고 가이드라인에서 권고한다.
    2) VLAN: L2 스위치에서 포트 별로 묶음으로 해서 LAN 환경을 구성할 수 있다.(하나의 L2 스위치에서 망 분리)
    3) 백업1: 웹 호스팅 서버는 active-standby 형태로 서비스 되어야 한다. 백업을 단기와 장기 백업을 유지하고, 백업 서버는 별도의 스토리지에서 운영하도록 구성한다.
        * 같은 서버에서의 백업 본은 백업으로 쳐주지 않는다! 라는 말이다. 별도의 백업 서버를 두어야 한다.
    4) 백업2: 데이터 서버->백업 서버로의 백업 방향이 아닌, 백업 서버->데이터 서버에 접근하여 백업 데이터를 가져가 백업을 해야 한다.
3. 서버 개발자는 PC방, 도서관 등의 공공 장소에서 개인 메일, 회사 메일 등 절대 접속하지 않는다. 이런 장소들은 바이러스에 감염되었다고 보자는 것이다.
    * 공용 와이파이 또한 접속하지 않는다.
4. 스마일 서브, 네이버, 구글 등은 3중 백업을 한다. 파일 시스템 자체를 개발하여 하나의 백업 본을 세개의 시스템에 저장한다. 이 시스템의 핵심은 3중으로 

### 원격 디버깅
1. 첫 번쨰: 작업 관리자 -> 세부 정보(프로세스 찾기) -> 문제 소지가 있을 코드 쪽에 Block->Dump파일 만든 후 열기->VS로 Dump를 열어 확인해보기
2. 두 번째: VS 설치된 폴더 이동 -> 2019 -> Community -> Common7 -> id -> Remote Debugger -> x64 복사 -> 원격 데스크톱으로 붙여넣기 -> msysmon.exe 실행 -> 포트 번호(접속 시도 PC) -> 인증 안 함 -> VS -> 프로세스에 견결 -> 연결 형태는 원격, 연결 대상을 proca...:port로 검색 ->    (종료: 디버그 -> 분리)
    * 기본 포트로 하게 되면 프로세스에 연결에서 찾기를 하게되면 다른 유저가 접속할 수 있게 된다.

## 기타 키워드
### DDNS(Dynamic-DNS)
1. 유동 IP를 도메인 네임 서버에 등록하기 위한 방법
2. DNS의 TTL을 건드려서 도메인 갱신 주기를 변경할 수 있다.
3. 공유기에서도 DDNS를 지원한다.
4. 집에서 DDNS 세팅 해보기!!

### 네트워크 클래스
1. 사설 IP 클래스 외우기
