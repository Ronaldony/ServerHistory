# 2022/03/30 수업내용(복습 완료)
## 레드블랙 트리
### 해당 수업은 해당 날짜의 수업 자료를 같이 참조하여 공부할 것!
### 삭제
1. 삭제 노드를 지운 후 부모에게 자식 노드를 물려줄 때 nullptr인지 Nil인지 확인하지 않아도 된다. 어차피 노드의 끝이라면 그저 물려주고 말면 끝나기 때문
2. 삭제
    1) 이진트리와 같이 왼쪽 방향의 오른쪽 리프 노드이던, 오른쪽 방향의 왼쪽 리프 노드이던 대신 삭제될 노드를 찾아 데이터 대입 후 노드를 삭제한다.(이전 시간 이진 트리 수업 참조) 이때 대신 삭제된 노드의 색깔이 레드인 경우는 그저 지우기만 하면 된다. 하지만 블랙인 경우 밸런스 작업이 들어가야 한다. 기본적으로 삭제된 노드의 자식을 기준으로 하는데 이 노드를 Replacement 노드라고 부르겠다.(수업 한정 가칭)
    2) 삭제 노드의 자식 노드 모두 Nil이었다면, 일시적으로 Nil 노드의 부모 노드를 삭제 노드의 부모로 해야한다.(이진 트리와는 조금 다름)
        * 이유: 삭제 노드의 위치를 기준으로 밸런스를 잡아야 하는데 해당 노드의 부모의 노드 정보를 알아야 하기 때문에 잠깐 Nil의 부모를 만드는 것이다.
2. 밸런싱
    1) 삭제 노드가 RED인 경우: 걍 지우면 됨
    2) 삭제 노드가 BLACK인 경우의 밸런스 작업 절차(이미 노드가 삭제되고 replacement가 그 자리로 들어가 기준이 된 상황)
        1) 첫 번째로 고려해볼 사항은 반대편에서 밸런스에 영향이 없는 레드를 가져와 블랙으로 바꾸는 것이다. 만약, 내 쪽에 레드가 없다면 삽입과 반대로 레드를 내리고 블랙을 올리면서 다함께 블랙을 없애는 방향쪽으로 생각해봐야 한다.
        * 절차 1-노드 색깔 검사: 만약 레드인 경우 블랙으로 전환 후 함수 종료, 블랙이라면 아래 밸런스 절차 진행
        * 절차 2-형제노드가 레드: 형제를 블랙으로 전환하고 부모를 레드 전환 및 좌회전한다. 그 다음 아래로 이동한 replacement를 기준으로 다시 절차 1로 돌아간다. 이때 내 형제의 두 자식이 null인지 조건 체크 하지 않는다. replacement 쪽에 블랙이 하나 없어진 상태인데 형제쪽의 두 자식 모두 Nil일 수가 없다.(블랙이 2 depth있어야하는 상황인데 두 자식 중 하나라도 Nil인 경우 애초에 밸런스가 맞지 않은 상황이 된 것이다.)
        * 절차 3-형제노드가 블랙 & 형제의 두 자식이 모두 블랙: 형제를 레드로 바꾼다. 이때 부모 기준 밑으로 블랙이 -1 차감된 상황이다.(replacement 측은 이미 차감됨) 이 시점에서 부모가 레드인 경우 블랙으로 바꾸면 부모 기준 밑으로 블랙 +1이 되고 밸런스 작업은 끝난다. 하지만, 블랙인 경우 부모를 replacement 노드로 변경시킨 후 위 절차 1로 돌아가 조건을 다시 시작한다.
        * 절차 4-형제노드가 블랙 & 형제의 왼쪽 자식이 레드: 부모를 블랙, 형제를 레드, 형제의 왼쪽 자식을 블랙으로 전환한다. 이후 형제를 우회전하여 형제의 왼쪽 자식이 부모의 오른쪽 자식이 되게 만든다.(다음 절차 5로 넘어감)
        * 절차 5-형제노드가 블랙 & 형제의 오른쪽 자식이 레드(최종 해결책): 형제를 부모의 색, 부모를 블랙, 형제의 오른쪽 자식을 블랙으로 전환한다. 이후 부모를 좌회전한다. 이후 Root를 블랙으로 전환한다. 처리 끝
        * 이 절차들은 순서가 일치하지 않아도 된다. 하지만 최종 해결책을 마지막 분기로 넣으면 코드가 간결해진다.(다만 분기를 더 탄다.)
 
### 삽입
1. 삽입 시 할아버지까지 봐야만 하는가?에 대한 의문
    1) 부모와 나(신규 노드)를 기준으로만 보면 할 수 있는 것이 없다. 삭제의 경우에도 사실 처음 replacement

### 오류검증 테스트 프로그램
1. 테스트 시 한 번에 트리를 만들고 테스트 프로그램을 한 번 하는 것이 더 많은 테스트를 할 수 있다.
2. 테스트 데이터마다도 성능과 결과가 달라질 수 있으니 그에 대한 고찰과 결론을 도출시켜야 한다.
