# 2022/04/15 수업내용
## TCP 파이터 서버
### 유저의 연결
1. 프린트물에 있는 코드는 '프로세싱 루프'와 '삭제 루프'를 분리하지 않은 코드이다. 하지만, 이는 좋은 코드가 아니다. 분리하는 것이 좀 더 깔끔하게 떨어지는 코드가 될 것이다.
2. 방을 파괴하는 시점
    1) 유저가 나가는 시점(세션이 끊기는 시점)에 판단하는 것
        * 모든 유저가 나가서 방이 파괴된다 라는 조건을 넣기가 무지 어렵다.
    2) 방을 파괴하는 시점을 따로 분리하여 조건들을 확인 후 파괴하는 것이 더욱더 로직을 간결하고 깔끔하다.

### 프로시저 함수
1. 언제든 형태를 바꾸기 위해서 같은 형태의 매개변수로 나누어야 한다.

### 더미
1. 시간을 기준으로 처리한다면 더미는 연속적으로 걸어다니는 것을 구현을 하지 않아도 된다. 최종적인 목적지만 서버에 알려줄 것이다.
    1) 서버는 특정 유저의 출발한 시간만 알고 있다면 새로운 유저가 접속하거나 충돌처리를 해야하는 경우, 시간을 기준으로 특정 유저의 이동 속도를 계산하여 이러한 처리할 수 있다.
       * 이러한 방법은 MO 환경에서는 적절할 수도 있다. 하지만 MMO 환경에서는 이러한 방법이 해가 될 수 있다. 모든 맵에 있는 유저에 대해서 계산이 이루어져야 하는데 이는 굉장한 부하를 가져오기 때문이다.
       * 따라서, 이러한 방법은 사용하지 않는다. 서버는 예측가능한 부하가 되는 것을 선호한다. 서버에서 클라를 지속적으로 걸어다니게 하는 방법을 통해 이러한 처리를 한다. 
2. 목적지의 공유
    1) 조작이 어떠한 방식이던 목적지를 공유해야 네트워크 레이턴시가 있다해도 최대한의 유저들의 좌표 싱크를 맞출수가 있다.

### 조작감과 유저의 조작
1. 내가 키를 눌렀을 때에 대한 반응이 있어야 조작감이 있다고 판단한다.
    * 키보드 조작: 키보드를 눌렀을 때 바로 반응이 와야 조작감이 좋다고 느낀다.
    * 마우스 조작: 클릭 지점에 이펙트만 띄어도 조작감이 있다고 느낌
2. 우리가 TCP 파이터에서 클라이언트의 좌표를 믿는 이유는 조작감을 위해서이다. 만약 서버의 좌표를 믿게 된다면 실제 서버는 조작 유저의 캐릭터를 조금 더 이동시키게되어, 조작 유저의 조작감을 떨어뜨린다. 이러한 문제를 해결하기 위하여 클라의 좌표를 믿게 만든 것이다. 하지만 실제 게임에서는 이러한 방법을 절때!! 사용하지 않는다.
3. 공격 시에 서버에서는 미리 충돌처리를 처리하여 결과를 클라에게 전달해주어야 한다.
4. 클라의 조작을 의심하고 판단하는 과정
    1) 공격, 이동 메시지 등 비정상적인 메시지가 수신되는 것이 확인되었다.
    2) 하지만 이게 RTT로 인해 발생되는 것인지 정확히 알 수 없다.
    3) 이때는 반복 행동, 시간 등의 기준을 기획자 또는 협업자와 상의하여 결정해야한다. (최대한 유저의 불만도 해결하는 방향으로 가야함 = 납득이 가게)

### 섹터(= 클러스터 혹은 파티션)
1. 섹터의 주 목적: 네트워크 전송(메시지 전송)의 범위를 제한하는 것. 즉, 나의 행동을 전달할 범위
2. 크기: 한 플레이어당 기본적으로 현재 위치를 기준으로 상하좌우, 위아래 대각선 9개의 섹터를 할당한다.
3. 섹터 영역에 무수히 많은 유저가 동시에 존재할 때 일어날 문제, 해결 방법 등을 고민하여 결론을 내야 한다.
4. 클라가 이동해서 섹터의 영역이 옮겨질 때 다른 클라에서 특정 행동을 하고 있을때 그 행동을 자연스럽게 이어가면서 해야한다.

### 섹터와 공격
1. 공격과 충돌이 발생 시 공격 메시지는 공격자 섹터 영역의 플레이어에게 전달해야 하고, 데미지 메시지는 피격자 섹터 영역의 플레이어들에게 전달해야 한다.

### 섹터의 사이즈
1. 시야 범위를 유저 수에 따라 유동적으로 바꾼다. => 섹터의 사이즈를 바꾼다? 절대 아님. 해결 방법은 섹터 영역의 범위를 바꾸는 것이다.

## 기타 키워드
### 
