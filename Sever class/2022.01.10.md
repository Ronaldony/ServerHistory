# 2022.01.10 수업내용(복습 완료)
## 캐시 히트율
### 캐시 히트율 높이는 방법
1. 방법
    1) 캐시 무효화를 줄이는 방법(미스율을 낮춘다): 자주 쓰기가 있거나 자주 읽기가 있는 변수들을 떼어놓는 것
    2) 캐시 히트율을 높이는 방법: 로직 단위로 사용 변수들을 alignas()로 뭉쳐놓는 것
        * 서로 연관된 변수들의 첫 번째 변수에 alignas(캐시 라인 크기)를 선언
    * 결국 위의 방법들은 데이터 지향 디자인(DOD)의 방향성이다. 하지만 면접시에는 DOD라고 답변하면 안됨!!!
    * 추후 멀티 스레드에서는 동기화나 인터러 관련된 내용이 나온다. (성능을 높이기 위하여 캐시 라인 얘기가 나옴)
2. 면접 시 기본적인 캐시 히트율 높이는 방법(지역적 접근성, 시간적 접근성)을 언급하고 위 방법을 밑밥만 깔기

## 윈도우 API GDI
### GDI
1. 본 수업에서는 GDI를 서버 모니터링과 관리툴을 제작하기 위한 정도로 사용한다.
2. 최근에는 서버 모니터링과 관리툴 제작에 웹 오픈소스를 활용함
    * 단, 서버에 커스터마이징하는데 시간, 비용이 많이 듦
    * 따라서 GDI는 길찾기, 맵의 구성 등의 간단한 것들을 가시적으로 보여주기 위한 도구 정도로만 생각할 것
3. 서버 점검은 자동화 시켜야한다.
    * 전원 관리, 패치 등 포함
4. 실시간 모니터링의 장점
    1) 지역적으로 부하를 파악할 수 있다. 던전별, 마을별 등
    2) 서버 문제 상황을 미리 예상할 수 있음
5. 대부분의 회사에서 stateful 서버를 실시간으로 모니터링하지 않는다.

## 유니코드
### Windows에서 한글은 완성형 코드를 사용한다.
1. 도스시절 국내 프로그래머들은 한글을 조합형으로 개발하였다. (아래아 한글은 여전히..)
    * 조합형: 초성, 중성, 종성으로 나누어 비트를 사용한다.

### 문자 표현의 종류
1. SBCS, MBCS, WBCS 로 나뉘는데 WBCS의 경우 사실 1byte로도 표현하는 경우가 있기 때문에 이렇게 나누는 것 자체가 애매하다.
    * But Windows에서는 WBCS를 항상 2byte라고 인식하고 프로그램

### 유니코드의 인코딩 방식
1. 유니코드는 단순히 **글자 표**이며 인코딩 방식을 의미하지 않는다. 
    * 혼동1: 유니코드는 2byte이다 => 유니코드는 2Byte를 기본으로 할 뿐이지 1~xByte를 표현하는 글자 표이다.유니코드는 현재도 업데이트 중이며, 특이한 한자나 생소한 나라의 언어들은 3Byte 이상으로도 표현한다.
    * 혼동2: 유니코드로 글자를 표현한다. => 인코딩 방식이 같이 나와야 한다. (UTF-x, EUC-KR 등)
2. 대표적인 유니코드 인코딩 방식
    <pre><code>
    1) UTF-8: 1byte를 기본으로 하며, 영어권에서는(+웹 오픈소스) 이 인코딩 방식만을 사용한다. 리눅스-유닉스 OS는 UTF-8 방식만을 사용한다.
    2) UTF-16: 2Byte를 기본으로 하며, 윈도우의 기본 인코딩 방식이다.
    3) UTF-32: 4Byte를 기본으로 한다.
    * 협업자와 네트워크 통신, 데이터 교환 등의 작업 시에는 항상 유니코드와 인코딩 방식을 함께 언급하며 대화해야 한다.
    => 예시) 유니코드로 어떠한 인코딩을 쓸 것이다!
    </code></pre>
3. 데이터베이스 저장 시 UTF-8로 저장한다. 때문에 프로그램에서 인코딩/디코딩 시 변환을 해주어야 한다.
    * UTF-16을 사용할 수 있다. 하지만 이렇게되면 웹과의 연동에 문제를 발생시킬 수 있다.

### BOM(유니코드 서명)
1. BOM이란 데이터의 인코딩 방식을 판별하기 위하여 파일 저장 시 가장 앞단에 넣는 **유니코드 서명**이다.
2. 각 인코딩의 BOM
    <pre><code>
    1) UTF-8:                   EF BB BF
    2) UTF-16 (빅 엔디안):      FE FF
    3) UTF-16 (리틀 엔디안):    FF FE
    4) UTF-32 (빅 엔디안):      00 00 FE FF
    5) UTF-32 (리틀 엔디안):    FF FE 00 00
    </code></pre>
3. 유닉스, 리눅스 계열 OS 및 웹 서버들은 BOM 코드가 저장된 파일을 읽을 시 크래쉬가 나거나 뻗어버린다.
    * 따라서, BOM 코드를 사용하지 않는 방향으로 가야한다. 

### WBCS를 사용하는 프로그래밍
1. Visual Studio 속성에서 문자 집합 속성의 의미
    * <img width=500 src="https://user-images.githubusercontent.com/95362065/148740454-a51b779b-dcc4-4440-b5e6-0bcc30f71333.png">
    * <img width=500 src="https://user-images.githubusercontent.com/95362065/148740636-cc4d4d3c-8aa2-4257-9044-be8bd241a2c9.png">
    * 단지 Visual Studio가 UNICODE를 매크로로 선언하는 것이다.
2. **중립자료형**은 UNICODE, _UNICODE 매크로 선언 여부에 따라, 문자열이 들어가는 윈도우 API, 런타임 라이브러리의 아스키, 유니코드 전용 함수 매크로로 나뉘게 된다.
3. 유니코드를 사용하기 위한 필요 마인드
    1) 유니코드를 사용하라! 윈도우 내부에서는 아스키로 입력되던 유니코드로 입력되던 유니코드로 변경하여 처리한다.
    2) 안전버전 문자열 함수를 사용하라! 문자열 버퍼 크기 초과 시 런타임 에러 발생하여 프로그램 종료되기 때문
4. C언어에서 wchar_t 는 표준적으로 2Byte가 아니지만, Windows에서는 2Byte를 표준으로 한다.

## 윈도우의 메모리 구조
### 유저 메모리와 커널 메모리
1. 각 프로세스들은 다음과 같은 독립적인 가상 주소 공간을 갖는다.(32 bit 환경)
    * <img width=500 src="https://user-images.githubusercontent.com/95362065/148742641-61d795db-3a81-4802-8f7a-fe001a392d85.png">
    * 게임 서버의 경우 2G가 부족하다. 따라서 무조건 64 Bit 환경으로 개발하는 것이 좋다.
    * 64 bit 윈도우에서는 유저모드 8TB, 커널모드 8TB로 제한하고 있다.
