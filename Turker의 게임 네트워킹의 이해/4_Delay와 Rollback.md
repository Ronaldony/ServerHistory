# Delay와 Rollback
## Deterministic(3_Deterministic 이어서)
1. 네트워크 Latency에 대한 처리가 잘 되지 않으면 Desync 상태가 된다.
2. 네트워크 Latency에 따른 Deterministc 처리 과정
    1) 각 유저가 키 입력 시 입력에 대한 처리를 네트워크 Latency만큼 기다린 후 이전에 입력된 타 유저의 입력에 따라 결과를 계산한다.
    * 이미지 첨부

## Delay
1. Deterministic 방식의 처리로 인하여 유저가 느끼는 결과 도출에 대한 지연을 의미한다.
2. 100ms 지연은 일반 유저의 경우 지연되는 것을 느끼지 못하지만 200ms의 경우 먹먹한 느낌을 받는다.
    * 보통 100ms 지연이 Maximum이라고 본다.

## Rollback
1. Delay의 단점을 보조하기 위한 방법론
2. 동작 원리: 타 유저 입력이 다른 유저에게 전달되는 순간 입력 시점으로 뒤로 감기한다. 그 순간부터 입력에 대한 처리 결과를 도출하여 다시 앞으로 진행 상태를 감아 sync를 맞춘다. 
    * 이미지 첨부
3. 문제점
    1) sync를 맞추는 과정에서 튕김 현상이 나타난다. 때문에 캐릭터가 갑자기 순간이동을 한다던지 인과 없이 대전에서 패배하는 상황이 벌어진다.
    2) 만들기가 어렵다.
        * 뒤감기에 필요한 과거 기록들을 저장해두어야 한다.
        * 뒤감기 후 입력에 대한 처리를 하여 다시 앞감기를 해야한다.
    3) 중간 접속 처리가 어렵다. 이는 Deterministic 방법 자체의 문제라고 볼 수 있다.
        * Deterministic 방식의 게임에서 유저의 네트워크 연결이 **끊긴 후 재접속** 하였을 때 현재 게임 sync를 맞추기 위해 게임의 처음 시작부터 자신을 포함한 모든 유저들의 입력 결과에 대해 앞감기하여 비로소 현재 sync를 맞추게 된다.
    4) 서로의 상태를 신뢰한다는 가정하에 상태를 공유하지 않는다. 그래서 조금이라도 desync가 일어나면 시간이 지날수록 점점 더 desync 상태가 심해진다.

## Delay와 Rollback
1. 실제 게임에서는 Delay와 Rollback이 혼합되어 사용된다.
2. 대표적 사용 사례: 오버워치(트레이서)
