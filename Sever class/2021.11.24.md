## 게임 서버(2021.11.22이어서)

  1. Stateful

    1) 한 서버에 게임 데이터 DB가 하나씩 독립적으로 사용될 수 있다.
    2) 클라이언트와 게임서버 사이에 로그인 서버를 두어 유저인증 절차를 거친다. 로그인 서버는 Stateless로도 만들 수 있다.(C++로도 Stateless 가능)
      (1) 로그인 서버는 Access DB를 따로 둔다.
    3) 최근 MMORPG는 2가지의 트렌드 BM이 있는데 첫 번째는 동접자를 늘리는 성능 위주, 두 번째는 동접자를 줄이고 서버를 늘리는 BM이다.
    4) 서버의 성능을 높이는 방법
      (1) 기능별 분산: 사냥, 채팅, 레이드, 몹AI, NPC, 경매장, 랭킹시스템 등 컨텐츠별로 서버를 나눔 => 애매한 비동기 식으로 구현하면 서버 사이에 TCP/IP 통신의 부담이 더 커지고 에러 발생이 심해질 수 있다.(조심히 다루어야 한다.)
      (2) 지역적 분산: : DB는 멀티 스레드 기능을 지원한다. 때문에 서버 자체의 채널을 분산시켜 하나의 DB에 연결하여 처리하는 방식이다. (하나의 채널이 DB의 Single Thread로 처리된다고 보면된다.)
      (3) 게임 개발 진행 혹은 완료 시 일정 동접자 수에 대한 임시 테스트를 통하여 회선계약(회선 비용에 관련된 계약건) 시 필요한 금액을 산정해야 한다.
      * (1), (2)의 경우 예전 방식으로 최근 추세는 서버를 나누기보다는 쓰레드를 나누어 처리한다.
    * 한 서버에 동접 5~7천 명이면 잘 설계된 서버로 볼 수 있다.

  2. Stateless

    1) Stateless는 로드 밸런서 장치를 두어 클라이언트가 어느 서버에 실행을 요청할 지 결정하게 된다. (어느 서버로 처리가 되든 결과가 같아야 한다.)
    2) 모든 서버가 DB를 이용하여 데이터 쓰기 및 읽기가 이루어진다. 서버는 로직처리만 한다. (로직처리만 이루어져야 Scale out이 가능하기 때문)
    * Stateful의 경우는 클라이언트와 통신 연결 상태를 유지한다. 반면, Stateless는 게임 서버와 연결 상태를 유지하지 않는다.
