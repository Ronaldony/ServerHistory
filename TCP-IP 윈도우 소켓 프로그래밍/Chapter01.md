# Chapter01 네트워크와 소켓 프로그래밍
## Section01 TCP/IP 프로토콜 개요
### TCP/IP 프로토콜 구조
1. 인터넷을 통해 통신을 수행하는 개체는 크게 호스트와 라우터로 나눌 수 있다.
    1) 호스트(host): 최종 사용자(end-user) 응용 프로그램을 수행하는 주체이다. PC, 휴대폰, 노트북 등이 속한다.
    2) 라우터(Router): 다른 네트워크에 연결된 호스트간에 데이터 교환을 시켜주는 장비
2. 인터넷에서 사용하는 핵심 프로토콜은 TCP와 IP로, 이를 비롯한 각종 프로토콜을 총칭하여 **TCP/IP 프로토콜**이라 부른다.
    * 일반적으로 TCP/IP 프로토콜은 OS의 일부로 구현되며, 응용 프로그램은 이를 사용하여 통신한다.
    * 통신의 최종 목적지는 호스트 자체가 아닌 그 안에 있는 응용 프로그램이다.
3. TCP/IP 프로토콜 계층별 기능
    1) 계층
        |계층|세부 내용|
        |------|---|
        |응용 계층|Telnet, FTP, HTTP, SMTP, MIME, SNMP...|
        |전송 계층|TCP, UDP|
        |인터넷 계층|IP|
        |네트워크 접근 계층|장치 드라이버, 네트워크 하드웨어|
    2) 네트워크 접근 계층(OSI L1, L2에 해당)
        * 물리적 네트워크를 통한 실제 데이터 통신을 담당한다. 구성 요소로는 네트워크 하드웨어와 OS가 제공하는 장치 드라이버가 있다.
        * 하드웨어적으로 정의된 물리 주소를 사용해 통신하며, 이더넷에서는 48bit 물리 주소를 사용한다.(MAC Address)
    3) 인터넷 계층
        * IP 주소와 라우팅을 이용하여 데이터를 목적지 호스트까지 전달하는 역할을 한다. 네트워크 접근 계층과는 다르게 소프트웨어적 논리 주소인 IP 주소를 사용한다.
        * 라우팅: 데이터를 목적지까지 전달하는 일련의 작업을 말한다. 라우팅은 데이터 전달에 필요한 정보 수집 및 전달 작업을 포함한다. 라우터가 이 작업을 한다.
        * IP는 인터 네트워크의 요구 사항을 만족한다.
    4) 전송 계층(transport layer)
        * 포트 번호를 사용하여 최종 통신 목적지(응용 프로그램)를 지정하고 오류 없이 데이터를 전송하는 역할을 한다.
        * 포트 번호: 전송 계층에서 프로세스(응용 프로그램)를 지정하는 일종의 주소
        * IP가 제공하는 전송 서비스는 신뢰성(unreliable)이 없다. 데이터의 유실 혹은 목적지에 전송되지 않을 수 있다. 전송 계층에서는 이러한 문제를 방지한다.
        * 전송 계층에 해ㅏㅇ하는 TCP/IP 프로토콜로는 TCP, UDP가 있다.
            |TCP|UDP|
            |------|---|
            |연결형 프로토콜, 연결 설정 후 통신 가능|비연결형 프로토콜, 연결 없이 통신 가능|
            |신뢰성 있는 데이터 전송, 데이터를 재전송함|신뢰성 없는 데이터 전송, 데이터를 재전송하지 않음|
            |1:1 통신(Unicast)|1:1, 1:N(Broadcast) 통신|
            |데이터 경계 구분 안 함, 바이트 스트림 서비스|데이터 경계 구분함, 데이터그램 서비스|
            * 바이트 스트림: 한 번에 한 바이트씩 연속적으로 전송되는 흐름과 같이 끊임없이 연속되는 바이트 열
            * 데이터그램: 독립적으로 취급되는 각각의 패킷
    5) 응용 계층(Application layer)
        * 전송 계층을 기반으로 한 다수의 프로토콜(Telnet, FTP, HTTP, SMTP, MIME, SNMP 등)과 이 프로토콜을 사용하는 응용 프로그램을 포괄한다.

### 데이터 전송 원리
1. 패킷: 각 프로토콜에서 정의한 제어 정보(IP 주소, 포트 번호, 오류 체크 코드 등)가 전송 데이터의 앞에 붙는 헤더(header)와 뒤에 붙는 트레일러(trailer)로 **전송 데이터와 결합된 상태를 의미**한다.
    * 즉, 패킷 = 헤더 + 데이터 + 트레일러
2. 두 호스트가 TCP/IP를 사용해 데이터를 교환 시 패킷의 전송 형태
    * <img width=600 src="https://user-images.githubusercontent.com/95362065/150680804-75cf4924-b794-4ca9-9224-7c0de679f38c.png">
3. TCP/IP 프로토콜을 사용한 데이터 전송 원리 일반환
    * <img width=800 src="https://user-images.githubusercontent.com/95362065/150681564-f3818661-fedc-46e2-b9d0-bcff0a6c18a7.png">

### IP 주소, 포트 번호
1. 라우터가 라우팅 시 IP 헤더에 포함된 수신자 IP를 사용하며, 수신쪽에서 답장 시 송신자 IP를 사용한다.
2. IP는 호스트를 구별할 수는 있지만 최종 목적지인 프로세스는 식별하지 못한다. 이 프로세스 식별하는 것이 **포트 번호**이다.
    * 포트 번호는 IP가 아닌 TCP, UDP에 연결된다.
    * 한 호스트 내에서도 둘 이상의 프로세스에 의해 같은 포트 번호가 사용될 수 있다.
    * 궁금증: 둘 이상의 프로세스가 같은 포트 번호를 사용한다면 패킷은 어디로 갈 것인가? =>
3. 영역별 포트 번호
    |포트번호|분류|
    |------|---|
    |0 ~ 1023|알려진 포트, 시스템 프로세스들이 사용하는 번호이므로 함부로 사용하면 안 됨|
    |1024 ~ 49151|등록된 포트, 보통 서버를 작성할 때 사용하는 포트 번호|
    |49152 ~ 65535|동적/사설 포트, 개인 용도로 사용되는 포트들|
    
### 클라이언트-서버 모델
1. 네트워크로 연결된 컴퓨터에서 실행되는 두 프로그램은 반드시 통신 프로토콜을 사용해야만 통신이 가능하다.
2. 클라이언트-서버 모델에서 클라이언트는 서버에 접속 시 서버의 IP, 포트 번호를 알고 있어야 한다. 반면 서버는 클라이언트가 보낸 패킷에 담긴 주소 정보를 사용하여 클라이언트에 데이터를 보낸다.
    * 따라서 서버 응용 프로그램 작성 시 클라이언트의 IP, 포트 번호를 알고 있을 필요가 없다!!
3. 루프백 주소: 시스템 자신을 나타내는 의미로 내부적으로만 사용된다.
    * IPv4는 127.0.0.1, Ipv6는 0:0:0:0:0:0:0:1가 루프백 주소이다.
    * 한 컴퓨터에서 네트워크 프로그램을 테스트할 떄 유용한 주소이다.

## Section02 소켓의 개념
### 소켓
1. 소켓은 포트 번호와 IP 주소 등의 통신 관련 정보를 포괄하는 개념으로 볼 수 있다.
2. 본 책에서는 소켓을 다음 세 가지 관점으로 살펴본다.
    1)  데이터 타입
    2)  통신 종단점
    3)  네트워크 프로그래밍 인터페이스

### 데이터 타입
1. 소켓은 프로그래밍 관점에서 파일의 파일 디스크립터, 커널 오브젝트의 핸들과 유사하다.
2. 소켓은 생성과 설정 과정이 끝나면 운영체제의 통신 관련 정보를 참조해 다양한 작업을 편리하게 할 수 있는 데이터 타입으로 볼 수 있다. 소켓을 이용하여 다음의 정보에 접근할 수 있다.
    * 사용할 프로토콜(TCP, UDP 등), 송수신 IP 주소 및 포트

### 통신 종단점
1. 소켓은 응용 프로그램 관점에서 통신의 출발점과 도착점이라고 간주할 수 잇다.
    * <img width=600 src="https://user-images.githubusercontent.com/95362065/150810847-64c0adfd-ae09-4a9d-96c5-95d95b305845.png">

### 네트워크 프로그래밍 인터페이스
1. TCP/IP 프로토콜 구조에서 소켓은 일반적으로 응용 계층과 전송 계층 사이에 위치한다고 간주한다. 또한 네트워크 프로그래밍 인터페이스에 불과하다.
    * 이미지 삽입

## Section03 윈도우 소켓(윈속)
### 윈도우 소켓 특징
